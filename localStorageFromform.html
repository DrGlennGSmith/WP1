
<html>

<head>
<script type="text/javascript">

/*
 * Here is a function that users local storage across browser sessions to get the user's 
 * name and greet them. This html5 local storage capability is supposed to be
 * better than cookies.
 */
function welcomeBack()
{
if (typeof(Storage)!== "undefined") // is local storage undefined by browser, !== means not equal value or not equal type
    {
     // browser supports local storage, so lets see if they've visited the web site before.
    
        // if haven't been here before, let's get your name
	if ((typeof localStorage.userName == "undefined") || (localStorage.userName == null))
		{
        // writing to local storage for the first time
		localStorage.userName = prompt("Welcome, what is your name?");        
		}
        
     // either you just wrote it out, or you're coming.
     // reading from local storage later
  	document.getElementById("result").innerHTML = "Welcome  " + localStorage.userName;
    
    if (!((typeof localStorage.firstname == "undefined") || (localStorage.firstname == null)))
			{
    		document.firstandlast.firstname.value = localStorage.firstname;        
            document.firstandlast.lastname.value = localStorage.lastname; 
            }
      
  	}
	else
  	 {
  	 document.getElementById("result").innerHTML="Sorry, your browser does not support web storage... so I can not greet you by name.";
  	 } 
  }
    
  /* write the contents of the form to local storage
  */
  function saveForm()
  {
    
   if (typeof(Storage)!== "undefined") // is local storage undefined by browser
    {
     // browser supports local storage, so lets see if they've visited the web site before.
        // writing to local storage for the first time
		localStorage.firstname = document.firstandlast.firstname.value;        
		localStorage.lastname  = document.firstandlast.lastname.value;
  	}
	else
  	 {
  	 document.getElementById("result").innerHTML="Sorry, your browser does not support web storage... so I can not greet you by name.";
  	 } 
  }
</script>
</head>
<body onload="welcomeBack()" onunload = "saveForm()">
<div id="result"></div>

 <form name="firstandlast">
    <label for="fname">First Name</label>
    <input type="text" id="fname" name="firstname" value="Your name..">

    <label for="lname">Last Name</label>
    <input type="text" id="lname" name="lastname" value="Your last name..">

    <input type="submit" value="Submit">
  </form>

    <button onclick="saveForm()">Save form</button>
      
</body>
</html>
